"use strict";(self.webpackChunk_asaharachihiro_components_library=self.webpackChunk_asaharachihiro_components_library||[]).push([[8554],{"./src/components/_02-input/DateRange/DateRange.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DateRange_stories});var react=__webpack_require__("./node_modules/react/index.js"),_00_common=__webpack_require__("./src/components/_00-common/index.ts"),cn=__webpack_require__("./src/utils/cn.ts"),Form=__webpack_require__("./src/components/_02-input/Form/index.ts"),parseISO=__webpack_require__("./node_modules/date-fns/parseISO.js"),isValid=__webpack_require__("./node_modules/date-fns/isValid.js"),toDate=__webpack_require__("./node_modules/date-fns/toDate.js");function isAfter(date,dateToCompare){return+(0,toDate.a)(date)>+(0,toDate.a)(dateToCompare)}var constructFrom=__webpack_require__("./node_modules/date-fns/constructFrom.js");function addDays(date,amount,options){const _date=(0,toDate.a)(date,options?.in);return isNaN(amount)?(0,constructFrom.w)(options?.in||date,NaN):amount?(_date.setDate(_date.getDate()+amount),_date):_date}var DatePicker=__webpack_require__("./src/components/_02-input/DatePicker/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var DateRange=function DateRange(_ref){var id=_ref.id,label=_ref.label,value=_ref.value,isValidValue=_ref.isValidValue,className=_ref.className,supportMessage=_ref.supportMessage,errorMessage=_ref.errorMessage,isRequired=_ref.isRequired,disabled=_ref.disabled,isStartOnMonday=_ref.isStartOnMonday,isJPLocale=_ref.isJPLocale,getCalendar=_ref.getCalendar,onChange=_ref.onChange,onBlur=_ref.onBlur,context=(_ref.onFocus,_ref.tooltip,(0,Form.xW)()),formData=(null==context?void 0:context.formData)||{},errors=(null==context?void 0:context.errors)||{},handleInputChange=(null==context?void 0:context.handleInputChange)||function(){},fixReversedDates=function fixReversedDates(range){if(!range.start||!range.end||""===range.start||""===range.end)return range;var startDate=(0,parseISO.H)(range.start),endDate=(0,parseISO.H)(range.end);return(0,isValid.f)(startDate)&&(0,isValid.f)(endDate)&&isAfter(startDate,endDate)?{start:range.end,end:range.start}:range},initialDateStr=void 0!==value?fixReversedDates({start:value.start,end:value.end}):void 0!==formData[id]?fixReversedDates({start:formData[id].start,end:formData[id].end}):{start:"",end:""},_React$useState2=_slicedToArray(react.useState(initialDateStr),2),dateRange=_React$useState2[0],setDateRange=_React$useState2[1],_React$useState4=_slicedToArray(react.useState([]),2),selectedDates=_React$useState4[0],setSelectedDates=_React$useState4[1],isValidStatus="boolean"==typeof isValidValue?isValidValue:null==errors[id];react.useEffect(function(){if(context&&formData[id]&&void 0!==formData[id].start&&void 0!==formData[id].end){var fixed=fixReversedDates({start:formData[id].start,end:formData[id].end});fixed!==formData[id]&&handleInputChange(id,fixed)}},[]);var handleRangeChange=function handleRangeChange(pickerId,value){var isStart=pickerId.includes("start"),next={start:isStart?value:dateRange.start,end:isStart?dateRange.end:value},fixed=fixReversedDates(next);setDateRange(fixed),context&&handleInputChange(id,fixed),onChange&&onChange(fixed)},handleInputBlur=function handleInputBlur(pickerId,value){var isStart=pickerId.includes("start"),next={start:isStart?value:dateRange.start,end:isStart?dateRange.end:value},fixed=fixReversedDates(next);setDateRange(fixed),context&&handleInputChange(id,fixed),onBlur&&onBlur(fixed)},getSelectedDate=react.useCallback(function(){if(!dateRange.start&&!dateRange.end)return[];if(dateRange.start&&!dateRange.end){var startDate=(0,parseISO.H)(dateRange.start);return(0,isValid.f)(startDate)?[startDate]:[]}if(!dateRange.start&&dateRange.end){var endDate=(0,parseISO.H)(dateRange.end);return(0,isValid.f)(endDate)?[endDate]:[]}if(dateRange.start&&dateRange.end){var _startDate=(0,parseISO.H)(dateRange.start),_endDate=(0,parseISO.H)(dateRange.end);if(!(0,isValid.f)(_startDate)||!(0,isValid.f)(_endDate))return[];if(isAfter(_startDate,_endDate))return[];for(var result=[],current=_startDate;!isAfter(current,_endDate);)result.push(current),current=addDays(current,1);return result}return[]},[dateRange.start,dateRange.end]);return react.useEffect(function(){setSelectedDates(getSelectedDate())},[dateRange.start,dateRange.end]),(0,jsx_runtime.jsxs)("div",{className,id,children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-end",children:[(0,jsx_runtime.jsx)(DatePicker.l,{className:"w-full",hasRange:!0,id:"_dateRange-start",onChange:handleRangeChange,onBlur:handleInputBlur,value:dateRange.start,selectedDates,isRequired:null==isRequired?void 0:isRequired.start,disabled:null==disabled?void 0:disabled.start,label,isJPLocale,isValidValue:isValidStatus,isStartOnMonday,getCalendar}),(0,jsx_runtime.jsx)("span",{className:"mx-2 flex h-10 grow-0 items-center text-xs text-black-sub",children:"〜"}),(0,jsx_runtime.jsx)(DatePicker.l,{className:"w-full",hasRange:!0,id:"_dateRange-end",onChange:handleRangeChange,onBlur:handleInputBlur,value:dateRange.end,selectedDates,isRequired:null==isRequired?void 0:isRequired.end,disabled:null==disabled?void 0:disabled.end,isJPLocale,isValidValue:isValidStatus,isStartOnMonday,getCalendar})]}),(0,jsx_runtime.jsxs)("div",{className:(0,cn.cn)(supportMessage||errorMessage?"mt-1":""),children:[supportMessage&&(0,jsx_runtime.jsx)("span",{className:"text-xs text-black-sub",children:supportMessage}),!isValidStatus&&(0,jsx_runtime.jsx)(_00_common.yn,{text:errors[id]||errorMessage||"入力がエラーになっています。"})]})]})};DateRange.displayName="DateRange";try{DateRange.displayName="DateRange",DateRange.__docgenInfo={description:"",displayName:"DateRange",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"DateRangeValue"}},isJPLocale:{defaultValue:null,description:"",name:"isJPLocale",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isValidValue:{defaultValue:null,description:"",name:"isValidValue",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"",name:"isRequired",required:!1,type:{name:"{ start?: boolean; end?: boolean; } | undefined"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"{ start?: boolean; end?: boolean; } | undefined"}},supportMessage:{defaultValue:null,description:"",name:"supportMessage",required:!1,type:{name:"string"}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"string"}},isStartOnMonday:{defaultValue:null,description:"",name:"isStartOnMonday",required:!1,type:{name:"boolean"}},getCalendar:{defaultValue:null,description:"",name:"getCalendar",required:!1,type:{name:"((inputData: Date) => { date: Date; disabled: boolean; }[])"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((range: DateRangeValue) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((range: DateRangeValue) => void)"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((range: DateRangeValue) => void)"}},tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/_02-input/DateRange/DateRange.tsx#DateRange"]={docgenInfo:DateRange.__docgenInfo,name:"DateRange",path:"src/components/_02-input/DateRange/DateRange.tsx#DateRange"})}catch(__react_docgen_typescript_loader_error){}const DateRange_stories={title:"Components/Input/DateRange",component:DateRange,tags:["autodocs"],parameters:{docs:{description:{component:"DateRangeは、 日付の範囲を入力するためにDatePickerをまとめるコンポーネントです。"}}}};var Default={args:{id:"date-range",label:"対象期間",className:"w-[400px]",isValidValue:!1,isRequired:{start:!1,end:!1},supportMessage:"指定できる日数は最大30日間です。",errorMessage:"選択できない日付が含まれています。"}};const __namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  args: {\n    id: "date-range",\n    label: "対象期間",\n    className: "w-[400px]",\n    isValidValue: false,\n    isRequired: {\n      start: false,\n      end: false\n    },\n    supportMessage: "指定できる日数は最大30日間です。",\n    errorMessage: "選択できない日付が含まれています。"\n  }\n}',...Default.parameters?.docs?.source}}}}}]);